// * ================================= *
// *  Forms
// * ================================= *

// remove spinners
input[type="number"] {
	-moz-appearance: textfield;
}
input[type="number"]::-webkit-inner-spin-button,
input[type="number"]::-webkit-outer-spin-button, {
	-webkit-appearance: none;
}


// default style
input.input,
textarea.input {
	border: @input-border-width solid @gray-l1;
	border-radius: none;
	padding: (10px - @input-border-width) 10px;
	margin: 5px 0;
	font-size: @input-font-size;
	line-height: 1em;
	transition: box-shadow .15s, border-color .15s, background-color .15s;
	box-shadow: 0 1px 1px rgba(0,0,0,.05) inset;
	appearance: none;
	outline: none;

	&:hover {
		border-color: darken(@gray-l1,10%);
	}

	&:focus {
		border-color: @primary-accent-color;
		.drop-shadow-light;
	}

	.dark &, &.ondark {
		border-color: @gray;
		background-color: fadeout(@black,60%);
		
		&:hover {
			border-color: @gray-l1;
		}
		&:focus {
			border-color: @primary-accent-color;
			background-color: fadeout(@black,30%);
		}
	}
}

textarea.input {
	min-height: 60px;
	min-width: 250px;
}

.dark {
	input, textarea, label {
		color: #fff;
	}
}

// attribute styles
input.input,
textarea.input {

	&:invalid, &:invalid:hover {
		border-color: @danger-color;
	}

	&:disabled {
		border-color: @gray-l1;
		background: fadeout(@gray,80%);
	}
}

label.form-label {
	font-size: @input-label-font-size;
	font-weight: 900;
	text-decoration: none !important;
	text-transform: uppercase;
	letter-spacing: @input-label-letter-spacing;
	line-height: 1;
	display: block;
	margin: 5px 0;
	padding-right: 5px;
}

.form-caption {
	font-size: @input-caption-font-size;
	color: @gray-d1;
	line-height: 1em;
	margin: 8px 0;
	text-decoration: none;
	text-transform: none;
	letter-spacing: 0;
	font-weight: normal;

	label & {
		display: inline-block;
		margin: 0;
		font-size: 1em;
	}
}

// form groups
.form-group {
	width: 100%;
	margin-bottom: 20px;

	&:last-child {
		margin-bottom: inherit;
	}

	.form-group {
		margin-bottom: 0;
	}

	label {
		display: block;
		width: 100%;
	}

	input.input,
	textarea.input {
		width: 100%;
		display: block;
	}

}


// input groups
.input-group {
	display: table;
	width: 100%;

	.input-addon {
		width: 1%;
		padding: (10px-@input-border-width) 10px;
		display: table-cell;
		margin: 0;
		background: fadeout(@gray-l2,50%);
		border: @input-border-width solid @gray-l1;
		font-size: @input-font-size;
		line-height: 1em;
		border-right-width: 0;

		.dark &, &.ondark {
			border-color: @gray;
		}
	}

	.input-addon:last-child {
		border-right-width: @input-border-width;
		border-left-width: 0;
	}


	input.input {
		display: table-cell;
		margin: 0;
	}
}


// inline form groups
.form-inline {
	.form-group {
		vertical-align: middle;
		display: inline-block;
		width: auto;
		margin-bottom: inherit;
	}

	.input-group {
		width: auto;
	}

	input[type="checkbox"].checkbox + label,
	input[type="radio"].radiobox + label {
		margin-right: 5px;
	}

	input.input {
		display: inline-block;
		width: auto;
	}

	label {
		display: inline-block;
		width: auto;
	}
}


// checkboxes and radioboxes
input[type="checkbox"].checkbox:checked,
input[type="checkbox"].checkbox:not(:checked),
input[type="radio"].radiobox:checked,
input[type="radio"].radiobox:not(:checked) {
	position: absolute;
	opacity: 0;
	width: 0;
	height: 0;
}

input[type="checkbox"].checkbox + label,
input[type="radio"].radiobox + label {
	margin: 5px 0;
	position: relative;
	cursor: pointer;
	padding-left: (@checkbox-size + 5px);

	&:before {
		position: absolute;
		top: 0;
		left: 0;
		display: block;
		content: "";
		width: @checkbox-size;
		height: @checkbox-size;
		border: @checkbox-border-width solid @gray-l1;
		background-color: #fff;
		box-sizing: border-box;
		transition: 0.2s;
	}

	&:hover:before {
		border-color: darken(@gray-l1,10%);
	}
	&:active:before {
		border-color: @primary-accent-color;
		background-color: @gray-l2;
		transition-duration: 0;
	}

	// on dark
	.dark &:before {
		border-color: @gray-d2;
		background-color: #111;
	}

	.dark &:hover:before {
		border-color: lighten(@gray-d2,10%);
	}

	.dark &:active:before {
		background-color: #000;
	}
}

// border radius
input[type="checkbox"].checkbox + label {
	&:before, &:after {
		border-radius: @checkbox-border-radius;
	}
}

input[type="radio"].radiobox + label {
	&:before, &:after {
		border-radius: @radiobox-border-radius;
	}
}

// focus (tab select) state
input[type="checkbox"].checkbox:focus + label,
input[type="radio"].radiobox:focus + label {
	&:before,
	.dark &:before {
		border-color: @primary-accent-color;
	}
}

input[type="checkbox"].checkbox + label,
input[type="radio"].radiobox + label　{
	&:after {
		position: absolute;
		top: 0;
		left: 0;
		display: block;
		content: "";
		width: 0;
		height: @checkbox-size;
		//background-image: data-uri('../assets/checkmark.svg');

		@checkmark-svg-data: escape("<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'><path fill='@{color-d1}' d='M2 8l2-2 3 3 6-6 2 2-8 8z'/></svg>");
		background-image: url("data:image/svg+xml,@{checkmark-svg-data}");

		background-size: @checkbox-size @checkbox-size;
		background-position: left center;
		box-sizing: border-box;
		padding: 0;
		background-clip: content-box;

		& when (@checkbox-disable-animation = false) {
			transition: width 0.1s, transform 0.1s;
		}
	}

	.dark &:after {
		@checkmark-svg-data: escape("<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'><path fill='@{color-l1}' d='M2 8l2-2 3 3 6-6 2 2-8 8z'/></svg>");
		background-image: url("data:image/svg+xml,@{checkmark-svg-data}");
	}

	.colorset(@checkbox-color);
}

input[type="radio"].radiobox + label　{
	&:after {
		width: @checkbox-size;
		height: @checkbox-size;
		padding: 5px;
		transform: scale(0);
		background-color: @color-d1;
	}

	.dark &:after {
		background-color: @color-l1;
	}
	.colorset(@checkbox-color);
}

// checked state
input[type="checkbox"].checkbox:checked + label {
	&:after {
		width: @checkbox-size;
	}
}

input[type="radio"].radiobox:checked + label　{
	&:after {
		transform: scale(1);
		background-image: none !important;
	}
}

// disabled
input[type="checkbox"].checkbox:disabled + label, 
input[type="radio"].radiobox:disabled + label {
	&:before, &:hover:before {
		background-color: fadeout(@gray,60%);
		border-color: fadeout(@gray-l1,50%);
	}

	&:after {
		opacity: 0.5;
	}

	.dark &:before,
	.dark &:hover:before {
		background-color: fadeout(@gray-d2,60%);
		border-color: fadeout(@gray,50%);
	}
}


// selectboxes
// uses Selecter (https://github.com/Formstone/Selecter)

.selecter {
	position: relative;
	display: block;
	margin: 10px 0;
	z-index: @selectbox-container-z-index;

	&:focus {
		box-shadow: none;
		outline: none;
	}

	&,
	& * {
		user-select: none !important;
	}


	// original select element
	.selecter-element {
		width: 100%;
		height: 100%;

		position: absolute;
		left: 0;

		opacity: 0;
		z-index: @selectbox-original-z-index;

		&,
		&:focus {
			outline: none;
			-webkit-tap-highlight-color: rgba(255, 255, 255, 0);
			-webkit-tap-highlight-color: transparent;
		}
	}


	// current selectbox selected
	.selecter-selected {
		position: relative;

		background: #fff;
		border: @selectbox-border-width solid #aaa;
		color: inherit;
		cursor: pointer;
		display: block;
		font-size: 0.9em;
		font-weight: bold;
		margin: 0;
		overflow: hidden;
		padding: 8px 40px 8px 20px;
		text-overflow: clip;
		z-index: @selectbox-selected-z-index;

		transition: border-color .15s, background-color .15s, box-shadow .15s;
		

		// caret
		&:after {
			height: 0;
			width: 0;

			position: absolute;
			top: 0;
			right: 15px;
			bottom: 0;

			border-left: 4px solid transparent;
			border-right: 4px solid transparent;
			border-top: 4px solid #aaa;
			content: '';
			display: block;
			margin: auto 0;

			transform-style: preserve-3d;
			transition: 0.2s border-color, 0.3s transform;
		}

		&:hover {
			border-color: @selectbox-color;
			
			&:after {
				border-top-color: @selectbox-color;
			}
		}


	}

	// selectbox options
	.selecter-options {
		width: 100%;
		max-height: 250px;

		position: absolute;
		top: 100%;
		left: 0;

		border: @selectbox-border-width solid @gray;
		border-width: 0 @selectbox-border-width @selectbox-border-width;
		background-color: #fff;
		display: none;
		margin: 0;
		overflow: auto;
		overflow-x: hidden;
		padding: 0;
		z-index: @selectbox-options-z-index;


		// optgroup header
		.selecter-group {
			color: #aaa;
			display: block;
			font-size: 0.8em;
			margin: 5px 0 0 0;
			padding: 5px 20px 5px 15px;
			text-transform: uppercase;
			font-weight: bold;

			&:first-child {
				margin-top: 0;
			}
		}


		// selectbox option items
		.selecter-item {
			width: 100%;

			background: #fff;
			color: #333;
			cursor: pointer;
			display: block;
			font-size: 0.9em;
			margin: 0 0 1px 0;
			overflow: hidden;
			padding: 8px 20px;
			text-decoration: none;
			text-overflow: ellipsis;

			&.placeholder {
				display: none;
			}

			&:last-child {
				margin-bottom: 0;
			}
			

			// option hover
			&:hover {
				background-color: rgba(0,0,0,.05);
			}

			&.selected {
				font-weight: bold;
				background: fadeout(@color-l1,80%);
				.colorset(@selectbox-color);

				&:hover {
					background: fadeout(@color-l1,60%);
				}
			}

			&.disabled,
			&.disabled:hover {
				color: #aaa;
				cursor: not-allowed;
			}
		}

	}

	
	// focused state
	&.focus, &:focus { 
		.selecter-selected {
			border-color: @selectbox-color;
			.drop-shadow-light;

			// caret color
			&:after {
				border-top-color: @selectbox-color;
			}
		}

		.selecter-options {
			border-color: @selectbox-color;
			.drop-shadow;
		}
	}

	// open state
	&.open {
		z-index: @selectbox-container-open-z-index;

		.selecter-selected {
			
			// flip caret
			&:after {
				transform: rotateX(180deg);
			}

		}
	}


	// 'cover' style option
	&.cover {

		.selecter-options {
			border-width: @selectbox-border-width;
			border-color: @selectbox-color;
			top: 0;
		}

	}


	// if at bottom of screen
	&.bottom {

		.selecter-options {
			top: auto;
			bottom: 100%;

			border-width: @selectbox-border-width @selectbox-border-width 0;
		}

		.selecter-item:last-child {
			border: none;
		}


		// 'cover' style option
		&.cover {

			.selecter-options {
				top: auto;
				bottom: 0;
			}

		}
	}


	// multiple select
	&.multiple {
		.selecter-options {
			width: 100%;

			position: static;

			border-width: @selectbox-border-width;
			display: block;
		}
	}


	// disabled
	&.disabled {

		.selecter-selected,
		.selecter-selected:hover {
			background: #fff;
			border-color: #ccc;
			color: #ccc;
			cursor: default;
		}
		
		// caret
		.selecter-selected:after {
			border-top-color: #ccc;
		}

		.selecter-options {
			background: #fff;
			border-color: #ccc;
		}

		.selecter-group,
		.selecter-item {
			border-color: #ccc;
			color: #ccc;
			cursor: default;
		}

		.selecter-item.selected,
		.selecter-item.selected:hover {
			background: #fff;
		}

		.selecter-item,
		.selecter-item:hover {
			color: #ccc;
			background-color: #fff;
		}
	}


}// end .selecter
